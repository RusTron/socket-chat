(this["webpackJsonpsocket-chat"]=this["webpackJsonpsocket-chat"]||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r,a,c,i,o,s,l=n(0),u=n.n(l),d=n(25),p=n.n(d),b=n(13),f=n(5),j=n(10),h=n(12),g=n(4),x=n(19),O=n.n(x);!function(e){e.h1="h1",e.h2="h2",e.h3="h3",e.h4="h4",e.h5="h5",e.h6="h6",e.p="p"}(r||(r={})),function(e){e.in="Log in",e.out="Log out"}(a||(a={})),function(e){e.ping="2",e.pong="3",e.connectionOpened="5",e.message="42"}(c||(c={})),function(e){e[e.SET_OUR_NAME=0]="SET_OUR_NAME",e[e.SET_CLEAR_DATA=1]="SET_CLEAR_DATA",e.SET_NEW_MESSAGE="new message",e.SET_FIRST_MESSAGE="login",e.SET_TYPING="typing",e.SET_STOP_TYPING="stop typing",e.SET_USER_LEFT="user left",e.SET_USER_JOIN="user joined"}(i||(i={})),function(e){e.button="button",e.submit="submit",e.reset="reset"}(o||(o={})),function(e){e.column="column",e.row="row"}(s||(s={}));var m,y,v,E,C,S="Welcome to Socket.IO Chat",w={new_message:"new message",login:"login",typing:"typing",stop_typing:"stop typing",user_left:"user left",user_joined:"user joined"},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.SET_OUR_NAME:return Object(g.a)(Object(g.a)({},e),{},{ourName:t.payload});case i.SET_NEW_MESSAGE:return Object(g.a)(Object(g.a)({},e),{},{messages:[].concat(Object(h.a)(e.messages),[[t.payload[0],Object(g.a)(Object(g.a)({},t.payload[1]),{},{time:O()().format("HH:mm")})]])});case i.SET_FIRST_MESSAGE:return Object(g.a)(Object(g.a)({},e),{},{messages:e.messages.length?[].concat(Object(h.a)(e.messages),[[t.payload[0],Object(g.a)(Object(g.a)({},t.payload[1]),{},{message:S})]]):[[t.payload[0],Object(g.a)(Object(g.a)({},t.payload[1]),{},{message:S})]]});case i.SET_TYPING:return Object(g.a)(Object(g.a)({},e),{},{typing:e.typing.length?[].concat(Object(h.a)(e.typing.filter((function(e){return e[1].username!==t.payload[1].username}))),[t.payload]):[t.payload]});case i.SET_STOP_TYPING:return Object(g.a)(Object(g.a)({},e),{},{typing:e.typing.length?e.typing.filter((function(e){return e[1].username===t.payload[1].username})):[]});case i.SET_USER_LEFT:return Object(g.a)(Object(g.a)({},e),{},{typing:e.typing.length?e.typing.filter((function(e){return e[1].username===t.payload[1].username})):[],messages:e.messages.length?[].concat(Object(h.a)(e.messages),[t.payload]):[t.payload]});case i.SET_USER_JOIN:return Object(g.a)(Object(g.a)({},e),{},{messages:e.messages.length?[].concat(Object(h.a)(e.messages),[t.payload]):[t.payload]});case i.SET_CLEAR_DATA:return Object(g.a)({},k);default:return e}},T=n(1),k={ourName:"",messages:[],notifications:[],loginStatus:!1,typing:[]},A=Object(l.createContext)({state:k,dispatch:function(){return null}}),M=function(e){var t=e.children,n=Object(l.useReducer)(_,k,(function(e){return e})),r=Object(j.a)(n,2),a=r[0],c=r[1];return Object(T.jsx)(A.Provider,{value:{state:a,dispatch:c},children:t})},I=n(2),N=n(3),R={socket:null,connection:!1,firstMessage:!0},L=N.a.input(m||(m=Object(I.a)(['\n  height: 30px;\n  font-variant: tabular-nums;\n  list-style: none;\n  font-feature-settings: "tnum";\n  position: relative;\n  display: inline-block;\n  width: 100%;\n  min-width: 0;\n  padding: 4px 11px;\n  color: rgba(0, 0, 0, 0.85);\n  font-size: 14px;\n  line-height: 1.5;\n  border: 1px solid #009bb7;\n  border-radius: 2px;\n']))),B=N.a.button(y||(y=Object(I.a)(["\n  line-height: 1.5;\n  position: relative;\n  display: inline-block;\n  white-space: nowrap;\n  text-align: center;\n  border: 1px solid transparent;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\n  user-select: none;\n  touch-action: manipulation;\n  color: #fff;\n  background: #009bb7;\n  border-color: #009bb7;\n  text-shadow: 0 -1px 0 rgb(0 0 0 / 12%);\n  box-shadow: 0 2px 0 rgb(0 0 0 / 5%);\n\n    :hover {\n      background: #01859C;\n      border-color: #01859C;\n    }\n"]))),G=N.a.textarea(v||(v=Object(I.a)(["\n  padding: 21px 0 22px 24px;\n  border: none;\n  outline: none;\n  height: 100%;\n  width: 100%;\n  resize: none;\n  font-family: Roboto, Arial;\n  font-size: 16px;\n  line-height: 19px;\n  color: #182a40;\n  overflow-y: scroll;\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n\n  &::-webkit-scrollbar {\n    width: 0;\n    height: 0;\n  }\n\n  &::placeholder {\n    font-size: 16px;\n    line-height: 19px;\n    color: #d7dbe6;\n  }\n"]))),H=u.a.forwardRef((function(e,t){var n=e.children,r=e.styles,a=e.setButtonActive,c=Object(l.useState)(""),i=Object(j.a)(c,2),o=i[0],s=i[1];return Object(T.jsx)(G,{placeholder:"Write a message",value:o,onChange:function(e){s(e.target.value.trimLeft()),a&&(e.target.value?a(!0):a(!1))},style:r,ref:t,children:n})})),P=N.a.button(E||(E=Object(I.a)(["\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    background-color: #818BA0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin-right: 20px;\n    border: none;\n    outline: none;\n"]))),D=N.a.form(C||(C=Object(I.a)(["\n  display: flex;\n"]))),U=function(e){var t=e.children,n=e.onSubmit,r=e.styles;return Object(T.jsx)(D,{onSubmit:n,style:r,children:t})};U.Input=function(e){var t=e.styles,n=Object(l.useState)(""),r=Object(j.a)(n,2),a=r[0],c=r[1];return Object(T.jsx)(L,{type:"text",onChange:function(e){c(e.target.value.trimLeft())},value:a,style:t})},U.Button=function(e){var t=e.type,n=e.children,r=e.text,a=e.styles;return Object(T.jsx)(B,{type:t,style:a,children:r||n||""})},U.Textarea=H,U.SendButton=function(e){var t=e.type,n=e.children,r=e.text,a=e.styles;return Object(T.jsx)(P,{type:t,style:a,children:r||n||""})};var F,W,z,J,V=function(e){var t=e.tag,n=e.styles,r=void 0===n?{}:n,a=e.children;return Object(l.createElement)(t,{style:r},a)},Z={width:"300px",height:"48px",marginBottom:"24px",fontSize:"24px",minHeight:"32px",padding:"4px 15px",borderRadius:"2px"},Y={fontSize:"24px",borderRadius:"2px"},X={display:"flex",flexDirection:s.column},q=N.a.div(F||(F=Object(I.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),K=Object(f.f)((function(e){var t=e.history,n=Object(l.useContext)(A).dispatch,a=function(e){R.socket=new WebSocket("wss://socketio-chat-h9jt.herokuapp.com/socket.io/?EIO=3&transport=websocket");var n=R.socket;n&&(n.onopen=function(){n.send("".concat(c.ping,"probe")),function(e){t.push("/".concat(e))}(e)})};return Object(T.jsxs)(q,{children:[Object(T.jsx)(V,{tag:r.h1,children:"Enter your name"}),Object(T.jsxs)(U,{onSubmit:function(e){e.preventDefault();var t=e.target.firstChild.value;n({type:i.SET_OUR_NAME,payload:t}),a(t)},styles:X,children:[Object(T.jsx)(U.Input,{styles:Z}),Object(T.jsx)(U.Button,{type:o.submit,text:"Join",styles:Y})]})]})})),Q=["title","titleId"];function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ee(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function te(e,t){var n=e.title,r=e.titleId,a=ee(e,Q);return l.createElement("svg",$({width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),n?l.createElement("title",{id:r},n):null,W||(W=l.createElement("path",{d:"M17.502 9.85511C17.6815 9.6715 17.8202 9.45595 17.9099 9.20847C18.0568 8.76938 17.9997 8.25845 17.9099 7.97904C17.7468 7.52399 17.4041 7.14079 16.9554 6.93323L2.711 0.187349C1.7728 -0.259715 0.646952 0.131466 0.190087 1.04156C-0.0383459 1.51257 -0.0628209 2.05544 0.132979 2.53444L2.3602 7.97106L15.6093 8.25047C16.5393 8.26644 17.3796 8.92107 17.4939 9.82318C17.502 9.83915 17.502 9.84713 17.502 9.85511Z",fill:"white"})),z||(z=l.createElement("path",{d:"M10.6491 12.1941C10.6491 12.1941 10.7797 11.5874 11.3834 11.4357C11.465 10.5895 11.8321 9.84706 12.4358 9.29621C12.5663 9.17646 12.705 9.08066 12.8519 8.98486L2.36028 9.2084L0.133064 14.653C-0.250377 15.603 0.222805 16.6808 1.19364 17.056C1.41392 17.1438 1.65051 17.1837 1.8871 17.1837C2.17264 17.1837 2.45818 17.1198 2.71109 17.0001L10.6491 13.24V12.1941Z",fill:"white"})),J||(J=l.createElement("path",{d:"M17.812 12.5058H17.2654V11.8267C17.2246 11.1803 16.9391 10.5749 16.4659 10.1331C15.9927 9.69126 15.3727 9.4458 14.7282 9.4458C14.0837 9.4458 13.4636 9.69126 12.9904 10.1331C12.5173 10.5749 12.2317 11.1803 12.1909 11.8267V12.5058H11.6443C11.6199 12.5058 11.5954 12.5058 11.5791 12.514C11.5546 12.5222 11.5383 12.5303 11.522 12.5467C11.5056 12.5631 11.4893 12.5794 11.4812 12.604C11.473 12.6285 11.4648 12.6449 11.4648 12.6694V16.9322C11.473 17.1203 11.5546 17.2922 11.6851 17.4231C11.8238 17.554 12.0033 17.6194 12.1909 17.6113H17.2654C17.453 17.6194 17.6325 17.5458 17.7712 17.4231C17.9099 17.2922 17.9833 17.1203 17.9915 16.9322V12.6694C17.9915 12.6449 17.9833 12.6203 17.9752 12.604C17.967 12.5794 17.9507 12.5631 17.9344 12.5467C17.9181 12.5303 17.8936 12.5222 17.8773 12.514C17.861 12.5058 17.8365 12.5058 17.812 12.5058ZM15.2748 16.0649C15.2748 16.0894 15.2748 16.114 15.2666 16.1385C15.2585 16.1631 15.2421 16.1794 15.2258 16.1958C15.2095 16.2122 15.185 16.2285 15.1606 16.2367C15.1361 16.2449 15.1116 16.2531 15.0871 16.2531H14.361C14.3366 16.2531 14.3121 16.2449 14.2876 16.2367C14.2631 16.2285 14.2468 16.2122 14.2224 16.1958C14.206 16.1794 14.1897 16.1549 14.1816 16.1385C14.1734 16.114 14.1734 16.0894 14.1734 16.0649L14.2876 15.0994C14.1979 15.0422 14.1245 14.9603 14.0673 14.8622C14.0184 14.764 13.9858 14.6576 13.9858 14.5513C13.9939 14.3631 14.0755 14.1913 14.2142 14.0603C14.3529 13.9294 14.5242 13.864 14.7119 13.864C14.8995 13.864 15.079 13.9376 15.2095 14.0603C15.3482 14.1913 15.4216 14.3631 15.4379 14.5513C15.4379 14.6576 15.4135 14.764 15.3564 14.8622C15.3074 14.9603 15.234 15.0422 15.1442 15.0994L15.2748 16.0649ZM16.1803 12.5058H13.276V11.8267C13.3005 11.4585 13.4636 11.1149 13.7329 10.8613C14.0021 10.6076 14.361 10.4685 14.7282 10.4685C15.0953 10.4685 15.4543 10.6076 15.7235 10.8613C15.9927 11.1149 16.1559 11.4585 16.1803 11.8267V12.5058Z",fill:"white"})))}var ne,re=l.forwardRef(te),ae=(n.p,["title","titleId"]);function ce(){return(ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ie(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function oe(e,t){var n=e.title,r=e.titleId,a=ie(e,ae);return l.createElement("svg",ce({width:18,height:10,viewBox:"0 0 18 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),n?l.createElement("title",{id:r},n):null,ne||(ne=l.createElement("path",{d:"M17.502 9.85511C17.6815 9.6715 17.8202 9.45595 17.9099 9.20847C18.0568 8.76938 17.9997 8.25845 17.9099 7.97904C17.7468 7.52399 17.4041 7.14079 16.9554 6.93323L2.711 0.187349C1.7728 -0.259715 0.646952 0.131466 0.190087 1.04156C-0.0383459 1.51257 -0.0628209 2.05544 0.132979 2.53444L2.3602 7.97106L15.6093 8.25047C16.5393 8.26644 17.3796 8.92107 17.4939 9.82318C17.502 9.83915 17.502 9.84713 17.502 9.85511Z",fill:"white"})))}var se,le,ue,de,pe,be,fe,je,he,ge,xe,Oe,me,ye,ve,Ee=l.forwardRef(oe),Ce=(n.p,N.a.label(se||(se=Object(I.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"])))),Se=Object(N.a)(Ee)(le||(le=Object(I.a)(["\n  transform: rotateX(180deg);\n  margin-top: -2px;\n"]))),we={width:"100%",maxHeight:"62px",height:"62px",borderTop:"1px solid #D7DBE6",display:"flex",justifyContent:"space-between",alignItems:"center"},_e={backgroundColor:"#01859C",cursor:"pointer",border:"none",outline:"none"},Te=function(){var e=Object(l.useState)(!1),t=Object(j.a)(e,2),n=t[0],r=t[1],a=Object(l.useRef)(null),s=Object(l.useContext)(A),u=s.state.ourName,d=s.dispatch;return Object(T.jsxs)(U,{onSubmit:function(e){if(e.preventDefault(),a.current){var t,n=[i.SET_NEW_MESSAGE,{username:u,message:a.current.value,time:O()().format("HH:mm")}];d((t=n,{type:i.SET_NEW_MESSAGE,payload:t})),R.socket&&R.socket.send("".concat(c.message).concat(JSON.stringify([i.SET_NEW_MESSAGE,a.current.value]))),a.current.value=""}},styles:we,children:[Object(T.jsx)(U.Textarea,{ref:a,setButtonActive:r}),Object(T.jsx)(U.SendButton,{type:o.submit,styles:n?_e:void 0,children:Object(T.jsx)(Ce,{children:n?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Ee,{}),Object(T.jsx)(Se,{})]}):Object(T.jsx)(re,{})})})]})},ke=N.a.div(ue||(ue=Object(I.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 8px 0;\n"]))),Ae=N.a.div(de||(de=Object(I.a)(["\n  width: auto;\n  max-width: 70%;\n  min-width: 20%;\n  /* background-color: #fcfafa; */\n  border-radius: 16px;\n  padding: 2px 10px;\n  text-align: center;\n"]))),Me=function(e){var t=e.message;return Object(T.jsxs)(l.Fragment,{children:[Object(T.jsx)(ke,{children:Object(T.jsx)(Ae,{children:function(e){switch(e){case i.SET_USER_JOIN:return"".concat(t[1].username," joined");case i.SET_USER_LEFT:return"".concat(t[1].username," left");case i.SET_FIRST_MESSAGE:return"Welcome to Socket.IO Chat";default:return""}}(t[0])})}),Object(T.jsx)(ke,{children:Object(T.jsx)(Ae,{children:"there are ".concat(t[1].numUsers," participants")})})]},"".concat(t[1].username," ").concat(Date.now()))},Ie=N.a.div(pe||(pe=Object(I.a)(["\n    border: 1px solid #D7DBE6;\n    max-width: 40%;\n    min-width: 140px;\n    padding: 8px 12px;\n    margin-top: 8px;\n    display: inline-block;\n    background-color: ",";\n    border-radius: ",";\n"])),(function(e){return e.fromMe?"#E5F3F8":"inherit"}),(function(e){return e.fromMe?"10px 10px 0px 10px":"0px 10px 10px 10px"})),Ne=N.a.div(be||(be=Object(I.a)(["\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n"]))),Re=N.a.span(fe||(fe=Object(I.a)(["\n  font-size: 14px;\n  line-height: 16px;\n  color: #c1c9da;\n"]))),Le=N.a.div(je||(je=Object(I.a)(["\n  display: flex;\n  justify-content: ",";\n"])),(function(e){return e.fromMe?"flex-end":"flex-start"})),Be={margin:"2px 0"},Ge=function(e){var t=e.fromMe,n=e.message,a=n.message,c=n.time,i=n.username;return Object(T.jsx)(Le,{fromMe:t,children:Object(T.jsxs)(Ie,{fromMe:t,children:[!t&&Object(T.jsx)(V,{tag:r.h5,styles:Be,children:i}),a,Object(T.jsx)(Ne,{children:Object(T.jsx)(Re,{children:c})})]})})},He=N.a.div(he||(he=Object(I.a)(["\n  display: flex;\n  box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.25);\n  border-radius: 2px;\n  height: calc(100% - 62px);\n  flex-grow: 1;\n  flex-direction: column;\n  position: relative;\n"]))),Pe=N.a.div(ge||(ge=Object(I.a)(["\n  margin: 8px 24px 36px;\n  overflow-y: scroll;\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n\n  &::-webkit-scrollbar {\n    width: 0;\n    height: 0;\n  }\n"]))),De=function(){var e=Object(l.useRef)(null),t=Object(l.useContext)(A).state,n=t.ourName,r=t.messages;return Object(l.useEffect)((function(){e.current&&e.current.lastChild&&e.current.lastChild.scrollIntoView()})),Object(T.jsx)(He,{children:Object(T.jsx)(Pe,{ref:e,children:r.map((function(e){return e[0]===i.SET_NEW_MESSAGE&&Object(T.jsx)(Ge,{fromMe:e[1].username===n,message:e[1]})||Object(T.jsx)(Me,{message:e})}))})})},Ue=N.a.div(xe||(xe=Object(I.a)(["\n  height: 100%;\n"]))),Fe=Object(f.f)((function(){var e=Object(l.useContext)(A),t=e.state,n=t.ourName,r=t.messages,a=t.typing,o=e.dispatch;console.log("messages",r,"typing",a);return Object(l.useEffect)((function(){var e=R.socket;if(e){e.onmessage=function(t){!function(e,t){var r=e.data.match(/^(\d+)/)[0],a=e.data.replace(/^(\d+)/,""),i=a?JSON.parse(a):"";if(r!==c.pong||R.connection){if(r===c.message&&R.connection){var s=i[0].replace(/ /,"_");if(!w[s])return;o({type:w[s],payload:i}),R.firstMessage=!1}}else{t.send(c.connectionOpened);var l=JSON.stringify(["add user",n]);t.send("".concat(c.message).concat(l)),R.connection=!0}}(t,e)},e.onclose=function(){console.log("closed")};var t=setInterval((function(){return e.send(c.ping)}),2e4);return function(){clearInterval(t),e.close(),R.connection=!1,R.firstMessage=!0,o({type:i.SET_CLEAR_DATA})}}}),[]),Object(T.jsxs)(Ue,{children:[Object(T.jsx)(De,{}),Object(T.jsx)(Te,{})]})})),We=N.a.div(Oe||(Oe=Object(I.a)(["\n  height: 93px;\n  background-color: #009bb7;\n"]))),ze=N.a.div(me||(me=Object(I.a)(["\n  height: calc(100% - 93px);\n"]))),Je=N.a.div(ye||(ye=Object(I.a)(["\n  width: 100%;\n  height: 100%;\n  max-width: 1280px;\n  border: 1px solid #009bb7;\n  margin: 0 auto;\n"]))),Ve=function(e){var t=e.children,n=e.styles;return Object(T.jsx)(Je,{style:n,children:t})};Ve.Header=function(e){var t=e.children,n=e.styles;return Object(T.jsx)(We,{style:n,children:t})},Ve.Content=function(e){var t=e.children,n=e.styles;return Object(T.jsx)(ze,{style:n,children:t})};var Ze=N.a.div(ve||(ve=Object(I.a)(["\n  height: 100%;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  font-size: 24px;\n  color: #fff;\n  padding: 0 40px;\n\n  :hover {\n    cursor: pointer;\n    color: #dff;\n  }\n"]))),Ye=function(){return Object(T.jsx)(Ze,{children:"Log in"})};var Xe=function(){return Object(T.jsx)(Ve,{children:Object(T.jsxs)(M,{children:[Object(T.jsx)(Ve.Header,{children:Object(T.jsx)(Ye,{})}),Object(T.jsx)(Ve.Content,{children:Object(T.jsxs)(f.c,{children:[Object(T.jsx)(f.a,{path:"/",exact:!0,component:K}),Object(T.jsx)(f.a,{path:"/:ourName",component:Fe})]})})]})})};n(41);p.a.render(Object(T.jsx)(b.a,{children:Object(T.jsx)(Xe,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.1d390e69.chunk.js.map